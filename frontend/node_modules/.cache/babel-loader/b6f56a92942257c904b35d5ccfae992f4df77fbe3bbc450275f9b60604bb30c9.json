{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/sharedWithVM/chat-app-final/frontend/src/pages/Home.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport AuthContext from '../context/AuthContext';\nimport { API_URL } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const {\n    user,\n    setError\n  } = useContext(AuthContext);\n  const [chatRooms, setChatRooms] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [roomName, setRoomName] = useState('');\n\n  // Fetch all chat rooms\n  const fetchChatRooms = async () => {\n    try {\n      const res = await axios.get(`${API_URL}/api/chatrooms`);\n      setChatRooms(res.data);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Could not fetch chat rooms');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchChatRooms();\n  }, []);\n\n  // Create a new chat room\n  const handleCreateRoom = async e => {\n    e.preventDefault();\n    if (!roomName.trim()) return;\n    try {\n      await axios.post(`${API_URL}/api/chatrooms`, {\n        name: roomName\n      });\n      setRoomName('');\n      fetchChatRooms();\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      setError(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Could not create chat room');\n    }\n  };\n\n  // Delete a chat room\n  const handleDeleteRoom = async roomId => {\n    try {\n      await axios.delete(`${API_URL}/api/chatrooms/${roomId}`);\n      fetchChatRooms();\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      setError(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Could not delete chat room');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading chat rooms...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Welcome, \", user === null || user === void 0 ? void 0 : user.firstName, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create-room-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Create New Chat Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCreateRoom,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Room Name\",\n          value: roomName,\n          onChange: e => setRoomName(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Create Room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-rooms-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Available Chat Rooms\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), chatRooms.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No chat rooms available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: chatRooms.map(room => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"chat-room-item\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/chatroom/${room._id}`,\n            className: \"room-name\",\n            children: room.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"room-info\",\n            children: [\"Created by: \", room.creator.firstName, \" \", room.creator.lastName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this), user && room.creator._id === user.id && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: () => handleDeleteRoom(room._id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 19\n          }, this)]\n        }, room._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"1XGFHgjbgA+sUzGjBOdiYXxHwrs=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","axios","AuthContext","API_URL","jsxDEV","_jsxDEV","Home","_s","user","setError","chatRooms","setChatRooms","loading","setLoading","roomName","setRoomName","fetchChatRooms","res","get","data","error","_error$response","_error$response$data","response","message","handleCreateRoom","e","preventDefault","trim","post","name","_error$response2","_error$response2$data","handleDeleteRoom","roomId","delete","_error$response3","_error$response3$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","firstName","onSubmit","type","placeholder","value","onChange","target","required","length","map","room","to","_id","creator","lastName","id","onClick","_c","$RefreshReg$"],"sources":["/home/user/Desktop/sharedWithVM/chat-app-final/frontend/src/pages/Home.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport AuthContext from '../context/AuthContext';\nimport { API_URL } from '../config';\n\nconst Home = () => {\n  const { user, setError } = useContext(AuthContext);\n  const [chatRooms, setChatRooms] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [roomName, setRoomName] = useState('');\n\n  // Fetch all chat rooms\n  const fetchChatRooms = async () => {\n    try {\n      const res = await axios.get(`${API_URL}/api/chatrooms`);\n      setChatRooms(res.data);\n    } catch (error) {\n      setError(error.response?.data?.message || 'Could not fetch chat rooms');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchChatRooms();\n  }, []);\n\n  // Create a new chat room\n  const handleCreateRoom = async (e) => {\n    e.preventDefault();\n    if (!roomName.trim()) return;\n\n    try {\n      await axios.post(`${API_URL}/api/chatrooms`, { name: roomName });\n      setRoomName('');\n      fetchChatRooms();\n    } catch (error) {\n      setError(error.response?.data?.message || 'Could not create chat room');\n    }\n  };\n\n  // Delete a chat room\n  const handleDeleteRoom = async (roomId) => {\n    try {\n      await axios.delete(`${API_URL}/api/chatrooms/${roomId}`);\n      fetchChatRooms();\n    } catch (error) {\n      setError(error.response?.data?.message || 'Could not delete chat room');\n    }\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading chat rooms...</div>;\n  }\n\n  return (\n    <div className=\"home-container\">\n      <h1>Welcome, {user?.firstName}!</h1>\n      \n      <div className=\"create-room-form\">\n        <h2>Create New Chat Room</h2>\n        <form onSubmit={handleCreateRoom}>\n          <input\n            type=\"text\"\n            placeholder=\"Room Name\"\n            value={roomName}\n            onChange={(e) => setRoomName(e.target.value)}\n            required\n          />\n          <button type=\"submit\" className=\"btn btn-primary\">Create Room</button>\n        </form>\n      </div>\n      \n      <div className=\"chat-rooms-list\">\n        <h2>Available Chat Rooms</h2>\n        {chatRooms.length === 0 ? (\n          <p>No chat rooms available</p>\n        ) : (\n          <ul>\n            {chatRooms.map((room) => (\n              <li key={room._id} className=\"chat-room-item\">\n                <Link to={`/chatroom/${room._id}`} className=\"room-name\">\n                  {room.name}\n                </Link>\n                <div className=\"room-info\">\n                  Created by: {room.creator.firstName} {room.creator.lastName}\n                </div>\n                {user && room.creator._id === user.id && (\n                  <button\n                    className=\"btn btn-danger\"\n                    onClick={() => handleDeleteRoom(room._id)}\n                  >\n                    Delete\n                  </button>\n                )}\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}